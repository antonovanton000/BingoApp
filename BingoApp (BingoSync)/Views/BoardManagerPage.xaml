<Page x:Class="BingoApp.Views.BoardManagerPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:cnt="clr-namespace:BingoApp.Controls"
      xmlns:behaviors="http://schemas.microsoft.com/xaml/behaviors"
      xmlns:local="clr-namespace:BingoApp.Views"
      xmlns:vm="clr-namespace:BingoApp.ViewModels"
      xmlns:m="clr-namespace:BingoApp.Models"
      mc:Ignorable="d" 
      d:DesignHeight="940" d:DesignWidth="1440"
      Background="{StaticResource GradientBackgroundBrush}"
      x:Name="page"
      Title="CreateRoomPage">
    <Page.Resources>
        <Storyboard x:Key="WelcomeAnimation">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="stackPanel" Storyboard.TargetProperty="(UIElement.Opacity)">
                <EasingDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="00:00:00.6000000" Value="1"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="stackPanel" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)">
                <EasingDoubleKeyFrame KeyTime="00:00:00" Value="-20"/>
                <EasingDoubleKeyFrame KeyTime="00:00:00.6000000" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="grid" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)">
                <EasingDoubleKeyFrame KeyTime="00:00:00" Value="-20"/>
                <EasingDoubleKeyFrame KeyTime="00:00:00.6000000" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="grid" Storyboard.TargetProperty="(UIElement.Opacity)">
                <EasingDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="00:00:00.6000000" Value="1"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="grid1" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)">
                <EasingDoubleKeyFrame KeyTime="00:00:00" Value="20"/>
                <EasingDoubleKeyFrame KeyTime="00:00:00.6000000" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="grid1" Storyboard.TargetProperty="(UIElement.Opacity)">
                <EasingDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="00:00:00.6000000" Value="1"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </Page.Resources>
    <Page.DataContext>
        <vm:BoardManagerViewModel/>
    </Page.DataContext>
    <behaviors:Interaction.Triggers>
        <behaviors:EventTrigger EventName="Loaded" SourceObject="{Binding ElementName=page}">
            <behaviors:InvokeCommandAction Command="{Binding AppearingCommand}" />
        </behaviors:EventTrigger>
    </behaviors:Interaction.Triggers>
    <Page.Triggers>
        <EventTrigger RoutedEvent="Page.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:0.3"/>
                </Storyboard>
            </BeginStoryboard>
            <BeginStoryboard Storyboard="{StaticResource WelcomeAnimation}"/>
        </EventTrigger>
    </Page.Triggers>
    <Grid>
        <Grid>
            <Image Height="500" HorizontalAlignment="Stretch" Stretch="UniformToFill" VerticalAlignment="Top" Source="{Binding Game.ImageCover}">
                <Image.Effect>
                    <BlurEffect Radius="30"/>
                </Image.Effect>
            </Image>
            <Grid Margin="0,0,0,0">
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#60202124" Offset="0"/>
                        <GradientStop Color="#202124" Offset="0.5"/>
                        <GradientStop Color="#111114" Offset="1"/>
                    </LinearGradientBrush>
                </Grid.Background>
            </Grid>
        </Grid>
        <Grid Margin="40,40,40,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="120"/>
                <RowDefinition Height="1*"/>
            </Grid.RowDefinitions>
            <StackPanel x:Name="stackPanel" Grid.Row="0" VerticalAlignment="Top" RenderTransformOrigin="0.5,0.5">
                <StackPanel.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform/>
                        <SkewTransform/>
                        <RotateTransform/>
                        <TranslateTransform/>
                    </TransformGroup>
                </StackPanel.RenderTransform>
                <TextBlock Style="{StaticResource SubHeaderTextBlockBlockStyle}" Text="{Binding Game.Name}" FontWeight="Light" FontSize="40" />
            </StackPanel>
            <Grid x:Name="grid" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,10,0,0" RenderTransformOrigin="0.5,0.5">
                <Grid.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform/>
                        <SkewTransform/>
                        <RotateTransform/>
                        <TranslateTransform/>
                    </TransformGroup>
                </Grid.RenderTransform>
                <StackPanel Orientation="Horizontal">
                    <Button Content="{DynamicResource bm_deletegame}" Style="{StaticResource FlatButtonStylePrimaryRed}"
                            Width="180" Command="{Binding DeleteGameCommand}" Margin="0,0,20,0"/>
                    <Button Content="{DynamicResource bm_createnew}" Style="{StaticResource FlatButtonStylePrimaryWithPlus}"
                        Width="180" Command="{Binding CreateNewPresetCommand}"/>
                </StackPanel>
            </Grid>
            <Grid x:Name="grid1" Grid.Row="1" RenderTransformOrigin="0.5,0.5">
                <Grid.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform/>
                        <SkewTransform/>
                        <RotateTransform/>
                        <TranslateTransform/>
                    </TransformGroup>
                </Grid.RenderTransform>
                <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="0,0,0,0" BorderThickness="0" Focusable="False">
                    <StackPanel Orientation="Vertical">
                        <TextBlock Text="{DynamicResource bm_presets}" Style="{StaticResource SubHeaderTextBlockBlockStyle}" FontSize="20" Margin="0,0,0,20"/>
                        <ItemsControl ItemsSource="{Binding Game.Presets}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate DataType="m:BoardPreset">
                                    <Grid Width="420" Height="180" Margin="0,0,20,0">
                                        <Border Width="420" Height="180" Background="{StaticResource BackgroundBrush}"
                                            BorderBrush="{StaticResource BorderColorBrush}" BorderThickness="1" CornerRadius="8" x:Name="borderTemplate"
                                            ClipToBounds="True">
                                            <behaviors:Interaction.Triggers>
                                            <behaviors:EventTrigger EventName="MouseLeftButtonDown" SourceObject="{Binding ElementName=borderTemplate}">
                                                <behaviors:InvokeCommandAction Command="{Binding DataContext.EditPresetCommand, ElementName=page}" CommandParameter="{Binding }" />
                                            </behaviors:EventTrigger>
                                        </behaviors:Interaction.Triggers>
                                            <Border.Triggers>
                                                <EventTrigger RoutedEvent="MouseEnter">
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation Duration="0:0:0.2" To="1" Storyboard.TargetName="hover"
                                                                         Storyboard.TargetProperty="Opacity"/>
                                                            <DoubleAnimation Duration="0:0:0.2" To="1.06" Storyboard.TargetName="imgST"
                                                                         Storyboard.TargetProperty="ScaleX"/>
                                                            <DoubleAnimation Duration="0:0:0.2" To="1.06" Storyboard.TargetName="imgST"
                                                                         Storyboard.TargetProperty="ScaleY"/>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </EventTrigger>
                                                <EventTrigger RoutedEvent="MouseLeave">
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetName="hover"
                                                                         Storyboard.TargetProperty="Opacity"/>
                                                            <DoubleAnimation Duration="0:0:0.2" To="1" Storyboard.TargetName="imgST"
                                                                         Storyboard.TargetProperty="ScaleX"/>
                                                            <DoubleAnimation Duration="0:0:0.2" To="1" Storyboard.TargetName="imgST"
                                                                         Storyboard.TargetProperty="ScaleY"/>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </EventTrigger>
                                            </Border.Triggers>
                                            <Border CornerRadius="8">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="180"/>
                                                        <ColumnDefinition Width="1*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Border CornerRadius="8,0,0,8">
                                                        <Border.Background>
                                                            <SolidColorBrush Color="{Binding RelativeSource={RelativeSource AncestorType=Page, Mode=FindAncestor}, Path=DataContext.GameColors[0]}"/>
                                                        </Border.Background>
                                                    </Border>
                                                    <Border CornerRadius="8,0,0,8">
                                                        <Border.Background>
                                                            <LinearGradientBrush EndPoint="0,1">
                                                                <GradientStop Color="#A0000000" Offset="0"/>
                                                                <GradientStop Color="#00000000" Offset="0.5"/>
                                                                <GradientStop Color="#A0000000" Offset="1"/>
                                                            </LinearGradientBrush>
                                                        </Border.Background>
                                                        <Grid>
                                                            <Image Stretch="UniformToFill" Opacity="1" RenderTransformOrigin="0.5,0.5" Height="120" Width="120" x:Name="img">
                                                                <Image.RenderTransform>
                                                                    <ScaleTransform x:Name="imgST" ScaleX="1" ScaleY="1"/>
                                                                </Image.RenderTransform>
                                                                <Image.Source>
                                                                    <DrawingImage>
                                                                        <DrawingImage.Drawing>
                                                                            <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                                                                                <GeometryDrawing Geometry="F0 M24,24z M0,0z M5.3783,2C5.3905,2,5.40273,2,5.415,2L7.62171,2C8.01734,1.99998 8.37336,1.99996 8.66942,2.02454 8.98657,2.05088 9.32336,2.11052 9.65244,2.28147 10.109,2.51866 10.4813,2.89096 10.7185,3.34757 10.8895,3.67665 10.9491,4.01343 10.9755,4.33059 11,4.62664 11,4.98265 11,5.37828L11,7.62172C11,8.01735 11,8.37337 10.9755,8.66942 10.9491,8.98657 10.8895,9.32336 10.7185,9.65244 10.4813,10.109 10.109,10.4813 9.65244,10.7185 9.32336,10.8895 8.98657,10.9491 8.66942,10.9755 8.37337,11 8.01735,11 7.62172,11L5.37828,11C4.98265,11 4.62664,11 4.33059,10.9755 4.01343,10.9491 3.67665,10.8895 3.34757,10.7185 2.89096,10.4813 2.51866,10.109 2.28147,9.65244 2.11052,9.32336 2.05088,8.98657 2.02454,8.66942 1.99996,8.37336 1.99998,8.01734 2,7.62171L2,5.415C2,5.40273 2,5.3905 2,5.3783 1.99998,4.98266 1.99996,4.62664 2.02454,4.33059 2.05088,4.01343 2.11052,3.67665 2.28147,3.34757 2.51866,2.89096 2.89096,2.51866 3.34757,2.28147 3.67665,2.11052 4.01343,2.05088 4.33059,2.02454 4.62664,1.99996 4.98266,1.99998 5.3783,2z M4.27752,4.05297C4.27226,4.05488 4.27001,4.05604 4.26952,4.0563 4.17819,4.10373 4.10373,4.17819 4.0563,4.26952 4.05604,4.27001 4.05488,4.27226 4.05297,4.27752 4.05098,4.28299 4.04767,4.29312 4.04372,4.30961 4.03541,4.34427 4.02554,4.40145 4.01768,4.49611 4.00081,4.69932 4,4.9711 4,5.415L4,7.585C4,8.02891 4.00081,8.30068 4.01768,8.5039 4.02554,8.59855 4.03541,8.65574 4.04372,8.6904 4.04767,8.70688 4.05098,8.71701 4.05297,8.72249 4.05488,8.72775 4.05604,8.72999 4.0563,8.73049 4.10373,8.82181 4.17819,8.89627 4.26952,8.94371 4.27001,8.94397 4.27226,8.94513 4.27752,8.94704 4.28299,8.94903 4.29312,8.95234 4.30961,8.95629 4.34427,8.96459 4.40145,8.97446 4.49611,8.98232 4.69932,8.9992 4.9711,9 5.415,9L7.585,9C8.02891,9 8.30068,8.9992 8.5039,8.98232 8.59855,8.97446 8.65574,8.96459 8.6904,8.95629 8.70688,8.95234 8.71701,8.94903 8.72249,8.94704 8.72775,8.94513 8.72999,8.94397 8.73049,8.94371 8.82181,8.89627 8.89627,8.82181 8.94371,8.73049 8.94397,8.72999 8.94513,8.72775 8.94704,8.72249 8.94903,8.71701 8.95234,8.70688 8.95629,8.6904 8.96459,8.65574 8.97446,8.59855 8.98232,8.5039 8.9992,8.30068 9,8.02891 9,7.585L9,5.415C9,4.9711 8.9992,4.69932 8.98232,4.49611 8.97446,4.40145 8.96459,4.34427 8.95629,4.30961 8.95234,4.29312 8.94903,4.28299 8.94704,4.27752 8.94513,4.27226 8.94397,4.27001 8.94371,4.26952 8.89627,4.17819 8.82181,4.10373 8.73049,4.0563 8.72999,4.05604 8.72775,4.05488 8.72249,4.05297 8.71701,4.05098 8.70688,4.04767 8.6904,4.04372 8.65574,4.03541 8.59855,4.02554 8.5039,4.01768 8.30068,4.00081 8.02891,4 7.585,4L5.415,4C4.9711,4 4.69932,4.00081 4.49611,4.01768 4.40145,4.02554 4.34427,4.03541 4.30961,4.04372 4.29312,4.04767 4.28299,4.05098 4.27752,4.05297z M16.3783,2L18.6217,2C19.0173,1.99998 19.3734,1.99996 19.6694,2.02454 19.9866,2.05088 20.3234,2.11052 20.6524,2.28147 21.109,2.51866 21.4813,2.89096 21.7185,3.34757 21.8895,3.67665 21.9491,4.01343 21.9755,4.33059 22,4.62665 22,4.98267 22,5.37832L22,7.62168C22,8.01733 22,8.37336 21.9755,8.66942 21.9491,8.98657 21.8895,9.32336 21.7185,9.65244 21.4813,10.109 21.109,10.4813 20.6524,10.7185 20.3234,10.8895 19.9866,10.9491 19.6694,10.9755 19.3734,11 19.0174,11 18.6217,11L16.3783,11C15.9827,11 15.6266,11 15.3306,10.9755 15.0134,10.9491 14.6766,10.8895 14.3476,10.7185 13.891,10.4813 13.5187,10.109 13.2815,9.65244 13.1105,9.32336 13.0509,8.98657 13.0245,8.66942 13,8.37337 13,8.01735 13,7.62172L13,5.37828C13,4.98265 13,4.62664 13.0245,4.33059 13.0509,4.01344 13.1105,3.67665 13.2815,3.34757 13.5187,2.89096 13.891,2.51866 14.3476,2.28147 14.6766,2.11052 15.0134,2.05088 15.3306,2.02454 15.6266,1.99996 15.9827,1.99998 16.3783,2z M15.2775,4.05297C15.2723,4.05488 15.27,4.05604 15.2695,4.0563 15.1782,4.10373 15.1037,4.17819 15.0563,4.26952 15.056,4.27001 15.0549,4.27226 15.053,4.27752 15.051,4.28299 15.0477,4.29312 15.0437,4.30961 15.0354,4.34427 15.0255,4.40145 15.0177,4.49611 15.0008,4.69932 15,4.9711 15,5.415L15,7.585C15,8.02891 15.0008,8.30068 15.0177,8.5039 15.0255,8.59855 15.0354,8.65574 15.0437,8.6904 15.0477,8.70688 15.051,8.71701 15.053,8.72249 15.0549,8.72775 15.056,8.72999 15.0563,8.73049 15.1037,8.82181 15.1782,8.89627 15.2695,8.94371 15.27,8.94397 15.2723,8.94513 15.2775,8.94704 15.283,8.94903 15.2931,8.95234 15.3096,8.95629 15.3443,8.96459 15.4015,8.97446 15.4961,8.98232 15.6993,8.9992 15.9711,9 16.415,9L18.585,9C19.0289,9 19.3007,8.9992 19.5039,8.98232 19.5986,8.97446 19.6557,8.96459 19.6904,8.95629 19.7069,8.95234 19.717,8.94903 19.7225,8.94704 19.7277,8.94513 19.73,8.94397 19.7305,8.94371 19.8218,8.89627 19.8963,8.82181 19.9437,8.73049 19.944,8.72999 19.9451,8.72775 19.947,8.72249 19.949,8.71701 19.9523,8.70688 19.9563,8.6904 19.9646,8.65573 19.9745,8.59855 19.9823,8.5039 19.9992,8.30068 20,8.02891 20,7.585L20,5.415C20,4.9711 19.9992,4.69932 19.9823,4.49611 19.9745,4.40145 19.9646,4.34427 19.9563,4.30961 19.9523,4.29312 19.949,4.28299 19.947,4.27752 19.9451,4.27226 19.944,4.27001 19.9437,4.26952 19.8963,4.17819 19.8218,4.10373 19.7305,4.0563 19.73,4.05604 19.7277,4.05488 19.7225,4.05297 19.717,4.05098 19.7069,4.04767 19.6904,4.04372 19.6557,4.03541 19.5986,4.02554 19.5039,4.01768 19.3007,4.00081 19.0289,4 18.585,4L16.415,4C15.9711,4 15.6993,4.00081 15.4961,4.01768 15.4015,4.02554 15.3443,4.03541 15.3096,4.04372 15.2931,4.04767 15.283,4.05098 15.2775,4.05297z M5.37828,13L7.62172,13C8.01735,13 8.37337,13 8.66942,13.0245 8.98657,13.0509 9.32336,13.1105 9.65244,13.2815 10.109,13.5187 10.4813,13.891 10.7185,14.3476 10.8895,14.6766 10.9491,15.0134 10.9755,15.3306 11,15.6266 11,15.9827 11,16.3783L11,18.6217C11,19.0174 11,19.3734 10.9755,19.6694 10.9491,19.9866 10.8895,20.3234 10.7185,20.6524 10.4813,21.109 10.109,21.4813 9.65244,21.7185 9.32336,21.8895 8.98657,21.9491 8.66942,21.9755 8.37336,22 8.01733,22 7.62168,22L5.37832,22C4.98267,22 4.62665,22 4.33059,21.9755 4.01343,21.9491 3.67665,21.8895 3.34757,21.7185 2.89096,21.4813 2.51866,21.109 2.28147,20.6524 2.11052,20.3234 2.05088,19.9866 2.02454,19.6694 1.99996,19.3734 1.99998,19.0173 2,18.6217L2,16.3783C1.99998,15.9827 1.99996,15.6266 2.02454,15.3306 2.05088,15.0134 2.11052,14.6766 2.28147,14.3476 2.51866,13.891 2.89096,13.5187 3.34757,13.2815 3.67665,13.1105 4.01344,13.0509 4.33059,13.0245 4.62664,13 4.98265,13 5.37828,13z M4.27752,15.053C4.27226,15.0549 4.27001,15.056 4.26952,15.0563 4.17819,15.1037 4.10373,15.1782 4.0563,15.2695 4.05604,15.27 4.05488,15.2723 4.05297,15.2775 4.05098,15.283 4.04767,15.2931 4.04372,15.3096 4.03541,15.3443 4.02554,15.4015 4.01768,15.4961 4.00081,15.6993 4,15.9711 4,16.415L4,18.585C4,19.0289 4.00081,19.3007 4.01768,19.5039 4.02554,19.5986 4.03541,19.6557 4.04372,19.6904 4.04767,19.7069 4.05098,19.717 4.05297,19.7225 4.05488,19.7277 4.05604,19.73 4.0563,19.7305 4.10373,19.8218 4.17819,19.8963 4.26952,19.9437 4.27001,19.944 4.27226,19.9451 4.27752,19.947 4.28299,19.949 4.29312,19.9523 4.30961,19.9563 4.34427,19.9646 4.40145,19.9745 4.49611,19.9823 4.69932,19.9992 4.9711,20 5.415,20L7.585,20C8.02891,20 8.30068,19.9992 8.5039,19.9823 8.59855,19.9745 8.65573,19.9646 8.6904,19.9563 8.70688,19.9523 8.71701,19.949 8.72249,19.947 8.72775,19.9451 8.72999,19.944 8.73049,19.9437 8.82181,19.8963 8.89627,19.8218 8.94371,19.7305 8.94397,19.73 8.94513,19.7277 8.94704,19.7225 8.94903,19.717 8.95234,19.7069 8.95629,19.6904 8.96459,19.6557 8.97446,19.5986 8.98232,19.5039 8.9992,19.3007 9,19.0289 9,18.585L9,16.415C9,15.9711 8.9992,15.6993 8.98232,15.4961 8.97446,15.4015 8.96459,15.3443 8.95629,15.3096 8.95234,15.2931 8.94903,15.283 8.94704,15.2775 8.94513,15.2723 8.94397,15.27 8.94371,15.2695 8.89627,15.1782 8.82181,15.1037 8.73049,15.0563 8.73026,15.0562 8.72968,15.0559 8.72861,15.0554 8.72733,15.0548 8.72536,15.054 8.72249,15.053 8.71701,15.051 8.70688,15.0477 8.6904,15.0437 8.65574,15.0354 8.59855,15.0255 8.5039,15.0177 8.30068,15.0008 8.02891,15 7.585,15L5.415,15C4.9711,15 4.69932,15.0008 4.49611,15.0177 4.40145,15.0255 4.34427,15.0354 4.30961,15.0437 4.29312,15.0477 4.28299,15.051 4.27752,15.053z M16.3783,13L18.6217,13C19.0174,13 19.3734,13 19.6694,13.0245 19.9866,13.0509 20.3234,13.1105 20.6524,13.2815 21.109,13.5187 21.4813,13.891 21.7185,14.3476 21.8895,14.6766 21.9491,15.0134 21.9755,15.3306 22,15.6266 22,15.9827 22,16.3783L22,18.6217C22,19.0173 22,19.3734 21.9755,19.6694 21.9491,19.9866 21.8895,20.3234 21.7185,20.6524 21.4813,21.109 21.109,21.4813 20.6524,21.7185 20.3234,21.8895 19.9866,21.9491 19.6694,21.9755 19.3734,22 19.0173,22 18.6217,22L16.3783,22C15.9827,22 15.6266,22 15.3306,21.9755 15.0134,21.9491 14.6766,21.8895 14.3476,21.7185 13.891,21.4813 13.5187,21.109 13.2815,20.6524 13.1105,20.3234 13.0509,19.9866 13.0245,19.6694 13,19.3734 13,19.0174 13,18.6217L13,16.3783C13,15.9827 13,15.6266 13.0245,15.3306 13.0509,15.0134 13.1105,14.6766 13.2815,14.3476 13.5187,13.891 13.891,13.5187 14.3476,13.2815 14.6766,13.1105 15.0134,13.0509 15.3306,13.0245 15.6266,13 15.9827,13 16.3783,13z M15.2775,15.053C15.2723,15.0549 15.27,15.056 15.2695,15.0563 15.1782,15.1037 15.1037,15.1782 15.0563,15.2695 15.056,15.27 15.0549,15.2723 15.053,15.2775 15.051,15.283 15.0477,15.2931 15.0437,15.3096 15.0354,15.3443 15.0255,15.4015 15.0177,15.4961 15.0008,15.6993 15,15.9711 15,16.415L15,18.585C15,19.0289 15.0008,19.3007 15.0177,19.5039 15.0255,19.5986 15.0354,19.6557 15.0437,19.6904 15.0477,19.7069 15.051,19.717 15.053,19.7225 15.0549,19.7277 15.056,19.73 15.0563,19.7305 15.1037,19.8218 15.1782,19.8963 15.2695,19.9437 15.27,19.944 15.2723,19.9451 15.2775,19.947 15.283,19.949 15.2931,19.9523 15.3096,19.9563 15.3443,19.9646 15.4015,19.9745 15.4961,19.9823 15.6993,19.9992 15.9711,20 16.415,20L18.585,20C19.0289,20 19.3007,19.9992 19.5039,19.9823 19.5986,19.9745 19.6557,19.9646 19.6904,19.9563 19.7069,19.9523 19.717,19.949 19.7225,19.947 19.7277,19.9451 19.73,19.944 19.7305,19.9437 19.8218,19.8963 19.8963,19.8218 19.9437,19.7305 19.944,19.73 19.9451,19.7277 19.947,19.7225 19.949,19.717 19.9523,19.7069 19.9563,19.6904 19.9646,19.6557 19.9745,19.5986 19.9823,19.5039 19.9992,19.3007 20,19.0289 20,18.585L20,16.415C20,15.9711 19.9992,15.6993 19.9823,15.4961 19.9745,15.4015 19.9646,15.3443 19.9563,15.3096 19.9523,15.2931 19.949,15.283 19.947,15.2775 19.9463,15.2756 19.9458,15.2741 19.9453,15.2729 19.9444,15.2709 19.9439,15.2698 19.9437,15.2695 19.8963,15.1782 19.8218,15.1037 19.7305,15.0563 19.73,15.056 19.7277,15.0549 19.7225,15.053 19.717,15.051 19.7069,15.0477 19.6904,15.0437 19.6557,15.0354 19.5986,15.0255 19.5039,15.0177 19.3007,15.0008 19.0289,15 18.585,15L16.415,15C15.9711,15 15.6993,15.0008 15.4961,15.0177 15.4015,15.0255 15.3443,15.0354 15.3096,15.0437 15.2931,15.0477 15.283,15.051 15.2775,15.053z" >
                                                                                    <GeometryDrawing.Brush>
                                                                                        <SolidColorBrush Color="{Binding RelativeSource={RelativeSource AncestorType=Page, Mode=FindAncestor}, Path=DataContext.GameColors[1]}"/>
                                                                                    </GeometryDrawing.Brush>
                                                                                </GeometryDrawing>
                                                                            </DrawingGroup>
                                                                        </DrawingImage.Drawing>
                                                                    </DrawingImage>
                                                                </Image.Source>
                                                            </Image>
                                                        </Grid>
                                                    </Border>
                                                    <Grid Grid.Column="1">
                                                        <StackPanel Margin="10,15">
                                                            <TextBlock Text="{Binding PresetName}" TextWrapping="Wrap" Style="{StaticResource SubHeaderTextBlockBlockStyle}" FontSize="25" Margin="0,0,0,10"
                                                                       LineStackingStrategy="MaxHeight" MaxHeight="50"/>
                                                            <TextBlock TextWrapping="Wrap" Style="{StaticResource SubHeaderTextBlockBlockStyle2}" FontSize="15" Margin="0,0,0,10">
                                                                <Run Text="{StaticResource bm_squares}"/>
                                                                <Run Text="{Binding SquareCount}"/>
                                                            </TextBlock>
                                                        </StackPanel>
                                                    </Grid>

                                                    <Border x:Name="hover" CornerRadius="8" BorderThickness="0" 
                                                            Background="#10FFFFFF" Opacity="0" Grid.ColumnSpan="2"/>
                                                    <StackPanel Orientation="Horizontal" Margin="5" HorizontalAlignment="Right" VerticalAlignment="Bottom"
                                                                Grid.Column="1">
                                                        <Button Style="{StaticResource IconButtonStyleColored}" 
                                                            Command="{Binding DataContext.CopyJSONCommand, ElementName=page}" CommandParameter="{Binding }"
                                                            Content="{DynamicResource bm_json}" FontFamily="Segoe UI" FontSize="12" Foreground="{StaticResource Yellow}" ToolTip="{DynamicResource bm_copyjson}"
                                                            Margin="0,0,3,0"/>
                                                        <Button Style="{StaticResource IconButtonStyleColored}" 
                                                            Command="{Binding DataContext.DuplicatePresetCommand, ElementName=page}" CommandParameter="{Binding }"
                                                            Content="&#xe8c8;" Foreground="{StaticResource Green}" ToolTip="{DynamicResource bm_duplicate}"
                                                            Margin="0,0,3,0"/>
                                                        <Button Style="{StaticResource IconButtonStyleColored}" 
                                                            Command="{Binding DataContext.DeletePresetCommand, ElementName=page}" CommandParameter="{Binding }"
                                                            Content="&#xe107;" Foreground="{StaticResource Danger}" ToolTip="{DynamicResource bm_delete}"/>
                                                    </StackPanel>
                                                </Grid>
                                            </Border>
                                        </Border>
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </StackPanel>
                </ScrollViewer>

            </Grid>
        </Grid>
        <cnt:ModalWindowControl Title="{DynamicResource bm_newpreset}" IsOpen="{Binding IsModalOpen, Mode=TwoWay}" d:Visibility="Collapsed">
            <Grid>
                <!---->
                <StackPanel Visibility="{Binding IsPresetCreating, Converter={StaticResource NotBoolToVisibilityConverter}}" Margin="0,40,0,0">
                    <cnt:InputFieldControl Text="{Binding NewPreset.PresetName, Mode=TwoWay}" Placeholder="{DynamicResource bm_presetname}" Label="{DynamicResource bm_presetname}" Margin="40,0,40,10"
                                               IsError="{Binding NewPreset.IsPresetNameError}" ErrorMessage="Requiered field!"
                                           IsRequiered="True"/>
                    <cnt:TextAreaFieldControl Text="{Binding NewPreset.Json, Mode=TwoWay}" Placeholder="{DynamicResource bm_pastejsonhere}" 
                                              Label="{DynamicResource bm_json}" Margin="40,0,40,10" Height="290" />

                    <TextBlock Visibility="{Binding NewPreset.IsJsonError, Converter={StaticResource BoolToVisConverter}}" 
                               Style="{StaticResource FlatTextBlockStyle}" 
                               Text="{DynamicResource bm_jsonerror}" 
                               Foreground="{StaticResource Danger}" Margin="55,-5,0,-15"/>

                  
                  
                    <Button Style="{StaticResource FlatButtonStylePrimaryWithPlus}" 
                                Command="{Binding CreatePresetFinallyCommand}"
                                Content="{DynamicResource bm_createpreset}" Width="250" HorizontalAlignment="Center" Margin="0,50,0,0"/>
                </StackPanel>
                <Grid Visibility="{Binding IsPresetCreating, Converter={StaticResource BoolToVisConverter}}">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <TextBlock Text="{Binding NewPreset.PresetName, StringFormat={StaticResource bm_creating0}}" Style="{StaticResource FlatTextBlockStyle}"
                                   Margin="0,0,0,50" FontSize="25" HorizontalAlignment="Center" TextAlignment="Center"/>
                        <cnt:SpinerControl SpinerColor="{StaticResource AccentBrush}" HorizontalAlignment="Center"
                                               Margin="40"/>
                    </StackPanel>
                </Grid>
                <!---->
            </Grid>
        </cnt:ModalWindowControl>
    </Grid>
</Page>
