<Window x:Class="BingoApp.BoardWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:BingoApp"
        xmlns:lottie="clr-namespace:LottieSharp.WPF;assembly=LottieSharp"
        xmlns:cl="clr-namespace:BingoApp.Classes"
        xmlns:cnt="clr-namespace:BingoApp.Controls"
        xmlns:vm="clr-namespace:BingoApp.ViewModels"
        xmlns:behaviors="http://schemas.microsoft.com/xaml/behaviors"        
        ShowInTaskbar="False"
        mc:Ignorable="d"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStyle="None"
        ResizeMode="CanResizeWithGrip"        
        x:Name="window"
        Title="BoardWindow" Height="820" Width="550">
    <Window.DataContext>
        <vm:RoomPageViewModel/>
    </Window.DataContext>
    <Window.Resources>
        <cl:BingoCollorNameConverter x:Key="BingoCollorNameConverter"/>
        <cl:BingoCollorBackgroundConverter x:Key="BingoCollorBackgroundConverter"/>
        <cl:CheckedCollorConverter x:Key="CheckedCollorConverter"/>
        <cl:TooltipTimeConverter x:Key="TooltipTimeConverter"/>
    </Window.Resources>
    <Grid Background="#01000000" MouseDown="Grid_MouseDown">
        <Viewbox Stretch="Uniform" x:Name="mainViewBox">
            <Grid Background="#01000000">
                <Grid.RowDefinitions>
                    <RowDefinition Height="3*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="90"/>
                </Grid.RowDefinitions>
                <Grid x:Name="grBoard" Grid.Row="0">
                    <Border HorizontalAlignment="Left" VerticalAlignment="Top" BorderThickness="0" 
                        BorderBrush="{StaticResource BorderColorBrush}" Height="550" Width="550">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="110"/>
                                <ColumnDefinition Width="110"/>
                                <ColumnDefinition Width="110"/>
                                <ColumnDefinition Width="110"/>
                                <ColumnDefinition Width="110"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="110"/>
                                <RowDefinition Height="110"/>
                                <RowDefinition Height="110"/>
                                <RowDefinition Height="110"/>
                                <RowDefinition Height="110"/>
                            </Grid.RowDefinitions>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="0" Grid.Column="0" Square="{Binding Room.Board.Squares[0], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="0" Grid.Column="1" Square="{Binding Room.Board.Squares[1], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="0" Grid.Column="2" Square="{Binding Room.Board.Squares[2], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="0" Grid.Column="3" Square="{Binding Room.Board.Squares[3], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="0" Grid.Column="4" Square="{Binding Room.Board.Squares[4], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>

                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="1" Grid.Column="0" Square="{Binding Room.Board.Squares[5], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="1" Grid.Column="1" Square="{Binding Room.Board.Squares[6], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="1" Grid.Column="2" Square="{Binding Room.Board.Squares[7], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="1" Grid.Column="3" Square="{Binding Room.Board.Squares[8], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="1" Grid.Column="4" Square="{Binding Room.Board.Squares[9], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>

                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="2" Grid.Column="0" Square="{Binding Room.Board.Squares[10], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="2" Grid.Column="1" Square="{Binding Room.Board.Squares[11], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="2" Grid.Column="2" Square="{Binding Room.Board.Squares[12], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="2" Grid.Column="3" Square="{Binding Room.Board.Squares[13], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="2" Grid.Column="4" Square="{Binding Room.Board.Squares[14], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>

                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="3" Grid.Column="0" Square="{Binding Room.Board.Squares[15], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="3" Grid.Column="1" Square="{Binding Room.Board.Squares[16], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="3" Grid.Column="2" Square="{Binding Room.Board.Squares[17], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="3" Grid.Column="3" Square="{Binding Room.Board.Squares[18], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="3" Grid.Column="4" Square="{Binding Room.Board.Squares[19], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>

                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="4" Grid.Column="0" Square="{Binding Room.Board.Squares[20], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="4" Grid.Column="1" Square="{Binding Room.Board.Squares[21], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="4" Grid.Column="2" Square="{Binding Room.Board.Squares[22], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="4" Grid.Column="3" Square="{Binding Room.Board.Squares[23], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                            <cnt:BingoSquare MarkCommand="{Binding MarkSquareCommand}" Grid.Row="4" Grid.Column="4" Square="{Binding Room.Board.Squares[24], Mode=TwoWay}" CurrentPlayerColor="{Binding Room.CurrentPlayer.Color}" IsPotentialBingoVisible="{Binding IsPotentialBingoVisible}" PotentialBingoColor="{Binding PotentialBingoColor}" IsTransparent="True"/>
                        </Grid>
                    </Border>
                    <Border Height="550" Width="550"
                        HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,0,0,0"
                        CornerRadius="10"
                        Visibility="{Binding Room.CurrentPlayer.IsBoardRevealed, Converter={StaticResource NotBoolToVisibilityConverter}}" 
                        x:Name="revealPanel" 
                        BorderThickness="1" BorderBrush="{StaticResource BorderColorBrush}" Background="{StaticResource BackgroundBrush}">
                        <behaviors:Interaction.Triggers>
                            <behaviors:EventTrigger EventName="MouseLeftButtonDown" SourceObject="{Binding ElementName=revealPanel}">
                                <behaviors:InvokeCommandAction Command="{Binding RevealBoardCommand}" />
                            </behaviors:EventTrigger>
                        </behaviors:Interaction.Triggers>
                        <Border.Triggers>
                            <EventTrigger RoutedEvent="MouseEnter">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="boardHidePanel" Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0:0:0.01" Value="{x:Static Visibility.Visible}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                            <EventTrigger RoutedEvent="MouseLeave">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="boardHidePanel" Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0:0:0.01" Value="{x:Static Visibility.Collapsed}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Border.Triggers>
                        <Grid>
                            <Border Background="#08FFFFFF" x:Name="boardHidePanel" Visibility="Collapsed"/>
                            <TextBlock Text="{Binding RevealPanelText}" HorizontalAlignment="Center" VerticalAlignment="Center"
                   Style="{StaticResource FlatTextBlockStyle}"/>
                        </Grid>
                    </Border>
                    <Border Height="550" Width="550" CornerRadius="10"
                        HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,0,0,0"
                        BorderThickness="1" BorderBrush="{StaticResource BorderColorBrush}" 
                        Background="{StaticResource BackgroundBrush}"
                        Visibility="{Binding Room.IsAutoRevealBoardVisible, Mode=OneWay, Converter={StaticResource BoolToVisConverter}}">
                        <Button Style="{StaticResource FlatButtonStylePrimaryNoArrow}" Content="{DynamicResource rp_startgame}" HorizontalAlignment="Center"
                            VerticalAlignment="Center" Width="160"
                            Command="{Binding StartGameCommand}"/>
                    </Border>
                </Grid>
                <Grid Grid.Row="1">
                    <Grid Margin="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*"/>
                            <ColumnDefinition Width="1*"/>
                        </Grid.ColumnDefinitions>
                        <Grid Grid.Column="0">
                            <ItemsControl ItemsSource="{Binding Room.ActualPlayers}" Margin="5,5,0,0"
                                      VerticalAlignment="Top" 
                                      Visibility="{Binding IsTeamView, Converter={StaticResource NotBoolToVisibilityConverter}}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Margin="0,0,50,10" ToolTip="{Binding PotentialBingos}">
                                            <StackPanel Orientation="Horizontal">
                                                <Border Width="60" Height="30" CornerRadius="4" 
                                                    Background="{Binding Color, Converter={StaticResource BingoCollorBackgroundConverter}}"
                                                    VerticalAlignment="Center" Margin="0,0,10,0" x:Name="plbadge">
                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,0">
                                                        <TextBlock Text="{Binding SquaresCount}" Style="{StaticResource FlatTextBlockStyle}" Foreground="White"
                                           Margin="0,0,5,0" FontFamily="{StaticResource HelveticaLight}" FontWeight="SemiBold"/>
                                                        <TextBlock Text="{Binding LinesCount, StringFormat='({0})'}" Style="{StaticResource FlatTextBlockStyle}" Foreground="White"
                                           FontFamily="{StaticResource HelveticaLight}" FontWeight="SemiBold"/>
                                                    </StackPanel>
                                                </Border>
                                                <TextBlock Text="{Binding NickName}" VerticalAlignment="Center" FontWeight="Medium" MaxWidth="180" TextTrimming="CharacterEllipsis"
                                   Style="{StaticResource SubHeaderTextBlockBlockStyle}" FontSize="18"/>
                                            </StackPanel>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Vertical" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </ItemsControl>
                            <ItemsControl ItemsSource="{Binding Room.PlayerTeams}" Margin="0,5,0,0"
                                    Height="80" VerticalAlignment="Top" Visibility="{Binding IsTeamView, Converter={StaticResource BoolToVisConverter}}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Margin="0,0,50,10">
                                            <StackPanel Orientation="Horizontal">
                                                <Border Width="60" Height="30" CornerRadius="4" 
                                                    Background="{Binding Color, Converter={StaticResource BingoCollorBackgroundConverter}}"
                                                    VerticalAlignment="Center" Margin="0,0,10,0" x:Name="plbadge">
                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,0">
                                                        <TextBlock Text="{Binding Players[0].SquaresCount}" Style="{StaticResource FlatTextBlockStyle}" Foreground="White"
                                                               Margin="0,0,5,0" FontFamily="{StaticResource HelveticaLight}" FontWeight="SemiBold"/>
                                                        <TextBlock Text="{Binding Players[0].LinesCount, StringFormat='({0})'}" Style="{StaticResource FlatTextBlockStyle}" Foreground="White"
                                                               FontFamily="{StaticResource HelveticaLight}" FontWeight="SemiBold"/>
                                                    </StackPanel>
                                                </Border>
                                                <TextBlock VerticalAlignment="Center" FontWeight="Medium" MaxWidth="180" TextTrimming="CharacterEllipsis"
                                                 Style="{StaticResource SubHeaderTextBlockBlockStyle}" FontSize="18">
                                                <Run Text="{Binding Color, Converter={StaticResource BingoCollorNameConverter}}"/>
                                                <Run Text="{Binding Players.Count, StringFormat='({0})', Mode=OneWay}" />
                                                </TextBlock>
                                            </StackPanel>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel Orientation="Vertical" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </ItemsControl>
                        </Grid>
                        <Grid Grid.Column="1">
                            <StackPanel Orientation="Vertical">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Room.TimerString}"  
                                   Visibility="{Binding Room.IsGameTimerStarted,Converter={StaticResource BoolToVisConverter}}" 
                                   FontFamily="{StaticResource HelveticaThin}" FontSize="60"
                                   RenderTransformOrigin="0.5, 0" Panel.ZIndex="100">
                                        <TextBlock.RenderTransform>
                                            <ScaleTransform ScaleX="1" ScaleY="1"/>
                                        </TextBlock.RenderTransform>
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Foreground" Value="#FEFEFE"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Room.IsTimerOnPause}" Value="True">
                                                        <Setter Property="Foreground" Value="{StaticResource AccentColorBrush}"/>
                                                        <DataTrigger.EnterActions>
                                                            <BeginStoryboard Name="TimerPauseStoryboard">
                                                                <Storyboard AutoReverse="True" RepeatBehavior="Forever">
                                                                    <DoubleAnimation Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)" From="1" To="1.1" Duration="0:0:1" />
                                                                    <DoubleAnimation Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)" From="1" To="1.1" Duration="0:0:1" />
                                                                </Storyboard>
                                                            </BeginStoryboard>
                                                        </DataTrigger.EnterActions>
                                                        <DataTrigger.ExitActions>
                                                            <StopStoryboard BeginStoryboardName="TimerPauseStoryboard"/>
                                                        </DataTrigger.ExitActions>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Room.IsGameEnded}" Value="True">
                                                        <Setter Property="Foreground" Value="{StaticResource WinBrush}"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                    <TextBlock Text="{Binding Room.StartingTimerString}" d:Visibility="Collapsed"
                                   Visibility="{Binding Room.IsStartTimerStarted,Converter={StaticResource BoolToVisConverter}}"
                                   FontFamily="{StaticResource HelveticaThin}" FontSize="60" Foreground="{StaticResource Danger}"/>
                                    <TextBlock Text="{Binding Room.AfterRevealTimerString}" d:Visibility="Collapsed"
                                   Visibility="{Binding Room.IsAfterRevealTimerStarted,Converter={StaticResource BoolToVisConverter}}"
                                   FontFamily="{StaticResource HelveticaThin}" FontSize="60" Foreground="{StaticResource Green}"/>

                                </StackPanel>
                                <!--<StackPanel Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Left"
                                    Visibility="{Binding IsTimerButtonsVisible, Converter={StaticResource BoolToVisConverter}}">
                                <Button Style="{StaticResource IconButtonStyleColored}" Content="&#xE102;"
                                    Background="{StaticResource GreenAlpha20}" Foreground="{StaticResource Green}"
                                    Visibility="{Binding IsStartVisible, Converter={StaticResource BoolToVisConverter}}"
                                    Command="{Binding StartTimerCommand}"
                                    Margin="0,0,20,0" HorizontalAlignment="Left"/>
                                <Button Style="{StaticResource IconButtonStyleColored}" Content="&#xE103;"
                                    Background="{StaticResource BlueAlpha20}" Foreground="{StaticResource Blue}"
                                    Visibility="{Binding IsPauseVisible, Converter={StaticResource BoolToVisConverter}}"                                        
                                    Command="{Binding PauseTimerCommand}"                                        
                                    Margin="0,0,20,0" HorizontalAlignment="Left"/>
                                <Button Style="{StaticResource IconButtonStyleColored}" Content="&#xE25E;" FontSize="14"
                                    Background="{StaticResource DangerAlpha20}" Foreground="{StaticResource Danger}"
                                    Visibility="{Binding IsResetVisible, Converter={StaticResource BoolToVisConverter}}"                                        
                                    Command="{Binding ResetTimerCommand}"                                        
                                    HorizontalAlignment="Left"/>

                            </StackPanel>
                            <Grid Visibility="{Binding Room.IsCreatorMode, Converter={StaticResource BoolToVisConverter}}">
                                <Button Style="{StaticResource IconButtonStyleColored}" Content="{DynamicResource rp_stop}"
                                    Visibility="{Binding IsStopVisible, Converter={StaticResource BoolToVisConverter}}"                                        
                                    Command="{Binding StopTimerCommand}"                                        
                                    HorizontalAlignment="Left"/>
                            </Grid>-->
                            </StackPanel>
                        </Grid>
                    </Grid>
                </Grid>
                <Grid Grid.Row="2">
                    <Grid Background="#9A000000" Margin="10,0" Height="90" Visibility="{Binding IsNewEventAdded, Converter={StaticResource BoolToVisConverter}}">
                        <Grid.Style>
                            <Style TargetType="Grid">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsNewEventAdded}" Value="True">
                                        <DataTrigger.EnterActions>
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:0.2"/>
                                                    <DoubleAnimation Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)" From="50" To="0" Duration="0:0:0.2"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </DataTrigger.EnterActions>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Grid.Style>
                        <Grid.RenderTransform>
                            <TranslateTransform X="0"/>
                        </Grid.RenderTransform>
                        <Border Background="{Binding NewFeedEvent.MessageColor}" Width="3" HorizontalAlignment="Left"/>
                        <StackPanel Margin="15,5,10,10">
                            <TextBlock Text="{Binding NewFeedEvent.MessageHeader}"  Foreground="{Binding NewFeedEvent.MessageColor}" FontWeight="Medium" FontSize="18" Margin="0,0,0,4" />
                            <TextBlock FontWeight="Regular" FontSize="15" TextTrimming="CharacterEllipsis" TextWrapping="Wrap">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding NewFeedEvent.IsItalic}" Value="True">
                                                <Setter Property="FontStyle" Value="Italic"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding NewFeedEvent.IsItalic}" Value="False">
                                                <Setter Property="FontStyle" Value="Normal"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            <Run Text="{Binding NewFeedEvent.MessageText, Mode=OneWay}" Foreground="{StaticResource PrimaryTextBrush}"/>
                            <Run Text="{Binding NewFeedEvent.Square.Name, Mode=OneWay}" FontWeight="Bold">
                            <Run.Style>
                                <Style TargetType="Run">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding NewFeedEvent.Remove}" Value="False">
                                            <Setter Property="Foreground" Value="{Binding NewFeedEvent.MessageColor}"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding NewFeedEvent.Remove}" Value="True">
                                            <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Run.Style>
                            </Run>
                            <Run Text="{Binding NewFeedEvent.ChangeColorName, Mode=OneWay}" FontWeight="Bold" Foreground="{Binding NewFeedEvent.Color, Converter={StaticResource BingoCollorBackgroundConverter} }"/>
                            </TextBlock>

                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" 
                                VerticalAlignment="Top" Margin="8">
                            <TextBlock Text="{Binding NewFeedEvent.Timestamp, StringFormat='HH:mm:ss'}" Foreground="{StaticResource AccentColorBrush}"
                                   Margin="5,-3,5,0"
                                   FontWeight="Regular" FontSize="15"/>
                            <TextBlock Text="&#xe121;" Foreground="{StaticResource AccentColorBrush}" 
                                   FontFamily="{StaticResource SegoeMDL2}" FontWeight="Medium" FontSize="15"/>
                        </StackPanel>
                    </Grid>
                </Grid>
            </Grid>
        </Viewbox>
        <Grid HorizontalAlignment="Right" VerticalAlignment="Bottom">
            <Button Style="{StaticResource IconButtonStyle}" HorizontalAlignment="Right" VerticalAlignment="Center"
                Content="&#xE10A;" Click="Button_Click"/>
        </Grid>
    </Grid>
</Window>
